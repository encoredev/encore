---
seotitle: Using Knex.js with Encore
seodesc: Learn how to use Knex.js with Encore to interact with SQL databases.
title: Using Knex.js with Encore
lang: ts
---

Encore supports using [Knex.js](http://knexjs.org/) with TypeScript. 
To use Knex.js with Encore, you need to create a new `SQLDatabase` instance and pass the connection string to Knex.js

```ts
-- site.ts --
import { SQLDatabase } from "encore.dev/storage/sqldb";
import knex from "knex";

const SiteDB = new SQLDatabase("siteDB", {
  migrations: "./migrations",
});

const orm = knex({
  client: "pg",
  connection: SiteDB.connectionString,
});

export interface Site {
  id: number;
  url: string;
}

// Create a query builder for the "site" table
const Sites = () => orm<Site>("site");

// Query all sites
await Sites().select();

// Query a site by id
await Sites().where("id", id).first();

// Insert a new site
await Sites().insert({ url: params.url })

```

## Migrations
Encore does not yet support js migration files generated by e.g. `knex migrate:make`. 
Instead, you have to maintain your own [migration files](/docs/ts/primitives/databases#database-migrations) in SQL format.

```sql
-- migrations/1_create_table.up.sql --
CREATE TABLE site (
    id SERIAL PRIMARY KEY,
    url TEXT NOT NULL UNIQUE
);
```

## Apply migrations
Migrations will automatically be applied when running your Encore application. You should not run `knex migrate:latest` or similar commands.