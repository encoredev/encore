-- code.go --
package code

import "context"
import "encore.dev/pubsub"

type Event struct {}

var Topic = pubsub.NewTopic[*Event]("topic", pubsub.TopicConfig{
    DeliveryGuarantee: pubsub.AtLeastOnce,
})


var _ = pubsub.NewSubscription(Topic, "subscription",
    pubsub.SubscriptionConfig[*Event]{
        Handler: func(ctx context.Context, event *Event) error {
            return nil
        },
    },
)
-- want:__encore/main/main.go --
package main

import (
	appinit "encore.dev/appruntime/apisdk/app/appinit"
	_ "example.com"
)

func main() {
	appinit.AppMain()
}
-- want:appruntime/shared/appconf/staticcfg.go --
package appconf

import config "encore.dev/appruntime/exported/config"

func init() {
	Static = &config.Static{
		AppCommit: config.CommitInfo{
			Revision:    "",
			Uncommitted: false,
		},
		BundledServices:   []string{"code"},
		CORSAllowHeaders:  nil,
		CORSExposeHeaders: nil,
		EncoreCompiler:    "",
		PubsubTopics: map[string]*config.StaticPubsubTopic{"topic": {Subscriptions: map[string]*config.StaticPubsubSubscription{"subscription": {
			Service:  "code",
			SvcNum:   1,
			TraceIdx: uint32(0x0),
		}}}},
		TestServiceMap: map[string]string{"code": "testing_path:code"},
		Testing:        false,
	}
}
-- want:encore.gen.go --
// Code generated by encore. DO NOT EDIT.

package code

// These functions are automatically generated and maintained by Encore
// to simplify calling them from other services, as they were implemented as methods.
// They are automatically updated by Encore whenever your API endpoints change.
-- want:encore_internal__api.go --
package code

func init() {}
