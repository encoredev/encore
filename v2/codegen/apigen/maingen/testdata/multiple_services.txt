-- foo/foo.go --
package foo

import "context"

//encore:api
func Foo(ctx context.Context) error { return nil }
-- bar/bar.go --
package bar

import "context"

//encore:api
func Bar(ctx context.Context) error { return nil }
-- want:__encore/main/main.go --
package main

import (
	appinit "encore.dev/appruntime/apisdk/app/appinit"
	_ "example.com/bar"
	_ "example.com/foo"
)

func main() {
	appinit.AppMain()
}
-- want:appruntime/shared/appconf/staticcfg.go --
package appconf

import config "encore.dev/appruntime/exported/config"

func init() {
	Static = &config.Static{
		AppCommit: config.CommitInfo{
			Revision:    "",
			Uncommitted: false,
		},
		BundledServices:   []string{"bar", "foo"},
		CORSAllowHeaders:  nil,
		CORSExposeHeaders: nil,
		EncoreCompiler:    "",
		PubsubTopics:      map[string]*config.StaticPubsubTopic{},
		TestServiceMap: map[string]string{
			"bar": "testing_path:bar",
			"foo": "testing_path:foo",
		},
		Testing: false,
	}
}
-- want:bar/encore.gen.go --
// Code generated by encore. DO NOT EDIT.

package bar

// These functions are automatically generated and maintained by Encore
// to simplify calling them from other services, as they were implemented as methods.
// They are automatically updated by Encore whenever your API endpoints change.
-- want:bar/encore_internal__api.go --
package bar

import (
	"context"
	__api "encore.dev/appruntime/apisdk/api"
	jsoniter "github.com/json-iterator/go"
	"net/http"
)

func init() {
	__api.RegisterEndpoint(EncoreInternal_api_APIDesc_Bar)
}

type EncoreInternal_BarReq struct{}

type EncoreInternal_BarResp = __api.Void

var EncoreInternal_api_APIDesc_Bar = &__api.Desc[*EncoreInternal_BarReq, EncoreInternal_BarResp]{
	Access: __api.Private,
	AppHandler: func(ctx context.Context, reqData *EncoreInternal_BarReq) (EncoreInternal_BarResp, error) {
		err := Bar(ctx)
		if err != nil {
			return __api.Void{}, err
		}
		return __api.Void{}, nil
	},
	CloneReq: func(r *EncoreInternal_BarReq) (*EncoreInternal_BarReq, error) {
		var clone *EncoreInternal_BarReq
		bytes, err := jsoniter.ConfigDefault.Marshal(r)
		if err == nil {
			err = jsoniter.ConfigDefault.Unmarshal(bytes, &clone)
		}
		return clone, err
	},
	CloneResp: func(r EncoreInternal_BarResp) (EncoreInternal_BarResp, error) {
		var clone EncoreInternal_BarResp
		bytes, err := jsoniter.ConfigDefault.Marshal(r)
		if err == nil {
			err = jsoniter.ConfigDefault.Unmarshal(bytes, &clone)
		}
		return clone, err
	},
	DecodeReq: func(httpReq *http.Request, ps __api.UnnamedParams, json jsoniter.API) (reqData *EncoreInternal_BarReq, pathParams __api.UnnamedParams, err error) {
		reqData = new(EncoreInternal_BarReq)
		return reqData, nil, nil
	},
	DefLoc: int32(0),
	EncodeResp: func(w http.ResponseWriter, json jsoniter.API, resp EncoreInternal_BarResp) (err error) {
		return nil
	},
	Endpoint:            "Bar",
	Fallback:            false,
	GlobalMiddlewareIDs: []string{},
	Methods:             []string{"GET", "POST"},
	Path:                "/bar.Bar",
	PathParamNames:      nil,
	Raw:                 false,
	RawHandler:          nil,
	RawPath:             "/bar.Bar",
	ReqPath: func(reqData *EncoreInternal_BarReq) (string, __api.UnnamedParams, error) {
		return "/bar.Bar", nil, nil
	},
	ReqUserPayload: func(reqData *EncoreInternal_BarReq) any {
		return nil
	},
	Service:           "bar",
	ServiceMiddleware: []*__api.Middleware{},
	SvcNum:            1,
}
-- want:foo/encore.gen.go --
// Code generated by encore. DO NOT EDIT.

package foo

// These functions are automatically generated and maintained by Encore
// to simplify calling them from other services, as they were implemented as methods.
// They are automatically updated by Encore whenever your API endpoints change.
-- want:foo/encore_internal__api.go --
package foo

import (
	"context"
	__api "encore.dev/appruntime/apisdk/api"
	jsoniter "github.com/json-iterator/go"
	"net/http"
)

func init() {
	__api.RegisterEndpoint(EncoreInternal_api_APIDesc_Foo)
}

type EncoreInternal_FooReq struct{}

type EncoreInternal_FooResp = __api.Void

var EncoreInternal_api_APIDesc_Foo = &__api.Desc[*EncoreInternal_FooReq, EncoreInternal_FooResp]{
	Access: __api.Private,
	AppHandler: func(ctx context.Context, reqData *EncoreInternal_FooReq) (EncoreInternal_FooResp, error) {
		err := Foo(ctx)
		if err != nil {
			return __api.Void{}, err
		}
		return __api.Void{}, nil
	},
	CloneReq: func(r *EncoreInternal_FooReq) (*EncoreInternal_FooReq, error) {
		var clone *EncoreInternal_FooReq
		bytes, err := jsoniter.ConfigDefault.Marshal(r)
		if err == nil {
			err = jsoniter.ConfigDefault.Unmarshal(bytes, &clone)
		}
		return clone, err
	},
	CloneResp: func(r EncoreInternal_FooResp) (EncoreInternal_FooResp, error) {
		var clone EncoreInternal_FooResp
		bytes, err := jsoniter.ConfigDefault.Marshal(r)
		if err == nil {
			err = jsoniter.ConfigDefault.Unmarshal(bytes, &clone)
		}
		return clone, err
	},
	DecodeReq: func(httpReq *http.Request, ps __api.UnnamedParams, json jsoniter.API) (reqData *EncoreInternal_FooReq, pathParams __api.UnnamedParams, err error) {
		reqData = new(EncoreInternal_FooReq)
		return reqData, nil, nil
	},
	DefLoc: int32(0),
	EncodeResp: func(w http.ResponseWriter, json jsoniter.API, resp EncoreInternal_FooResp) (err error) {
		return nil
	},
	Endpoint:            "Foo",
	Fallback:            false,
	GlobalMiddlewareIDs: []string{},
	Methods:             []string{"GET", "POST"},
	Path:                "/foo.Foo",
	PathParamNames:      nil,
	Raw:                 false,
	RawHandler:          nil,
	RawPath:             "/foo.Foo",
	ReqPath: func(reqData *EncoreInternal_FooReq) (string, __api.UnnamedParams, error) {
		return "/foo.Foo", nil, nil
	},
	ReqUserPayload: func(reqData *EncoreInternal_FooReq) any {
		return nil
	},
	Service:           "foo",
	ServiceMiddleware: []*__api.Middleware{},
	SvcNum:            2,
}
