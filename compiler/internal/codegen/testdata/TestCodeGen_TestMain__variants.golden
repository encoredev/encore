// pkg svc
package svc

import (
	"encore.dev/runtime"
	"encore.dev/runtime/config"
	"encore.dev/storage/sqldb"
	"os"
	"reflect"
	"testing"
)

func TestMain(m *testing.M) {
	// Register the Encore services
	services := []*config.Service{{
		Endpoints: nil,
		Name:      "svc",
		RelPath:   "svc",
		SQLDB:     false,
	}}

	// Set up the Encore runtime
	cfg := &config.ServerConfig{
		AuthData: reflect.TypeOf((*AuthData)(nil)),
		Services: services,
		Testing:  true,
	}
	runtime.Setup(cfg)
	sqldb.Setup(cfg)
	os.Exit(m.Run())
}

